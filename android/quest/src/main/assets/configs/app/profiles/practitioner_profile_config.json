{
  "appId": "app",
  "configType": "profile",
  "id": "practitionerProfile",
  "fhirResource": {
    "baseResource": {
      "resource": "Practitioner"
    },
    "relatedResources": [
      {
        "resource": "CarePlan",
        "searchParameter": "subject"
      },
      {
        "resource": "Task",
        "searchParameter": "subject"
      }
    ]
  },
  "rules": [
    {
      "name": "practitionerFirstName",
      "condition": "true",
      "actions": [
        "data.put('practitionerFirstName', fhirPath.extractValue(Practitioner, \"Practitioner.name[0].select(given[0])\"))"
      ]
    },
    {
      "name": "practitionerMiddleName",
      "condition": "true",
      "actions": [
        "data.put('practitionerMiddleName', fhirPath.extractValue(Practitioner, \"Practitioner.name[0].select(text)\"))"
      ]
    },
    {
      "name": "practitionerLastName",
      "condition": "true",
      "actions": [
        "data.put('practitionerLastName', fhirPath.extractValue(Practitioner, \"Practitioner.name[0].select(family)\"))"
      ]
    },
    {
      "name": "practitionerName",
      "condition": "true",
      "actions": [
        "data.put('practitionerName', data.get('practitionerFirstName') + ' ' + data.get('practitionerMiddleName') + ' ' + data.get('practitionerLastName'))"
      ]
    },
    {
      "name": "practitionerIdentifier",
      "condition": "true",
      "actions": [
        "data.put('practitionerIdentifier', fhirPath.extractValue(Practitioner, 'Practitioner.identifier[0].value'))"
      ]
    },
    {
      "name": "practitionerId",
      "condition": "true",
      "actions": [
        "data.put('practitionerId', fhirPath.extractValue(Practitioner, 'Practitioner.id'))"
      ]
    }
  ],
  "views": [
    {
      "viewType": "COLUMN",
      "children": [
        {
          "viewType": "CARD",
          "padding": 0,
          "content": [
            {
              "viewType": "COLUMN",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "@{practitionerName}",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "ID: #@{practitionerIdentifier}",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "height": 10
                }
              ]
            }
          ]
        },
        {
          "viewType": "SPACER",
          "height": 8
        },
        {
          "viewType": "CARD",
          "padding": 16,
          "header": {
            "viewType": "COMPOUND_TEXT",
            "primaryText": "VISITS",
            "primaryTextColor": "#6F7274",
            "fontSize": 18.0,
            "padding": 16
          },
          "content": [
            {
              "viewType": "LIST",
              "baseResource": "Task",
              "registerCard": {
                "rules": [
                  {
                    "name": "taskStatus",
                    "condition": "true",
                    "actions": [
                      "data.put('taskStatus', fhirPath.extractValue(Task, 'Task.status'))"
                    ]
                  },
                  {
                    "name": "taskStatusColorCode",
                    "condition": "true",
                    "actions": [
                      "data.put('taskStatusColorCode', data.get('taskStatus').equals('ready') ? 'DUE' : data.get('taskStatus').equals('failed') || data.get('taskStatus').equals('cancelled') ? 'OVERDUE' : data.get('taskStatus').equals('requested') ? 'UPCOMING' : data.get('taskStatus').equals('completed') ? 'COMPLETED' : 'UPCOMING')"
                    ]
                  },
                  {
                    "name": "taskDescription",
                    "condition": "true",
                    "actions": [
                      "data.put('taskDescription', fhirPath.extractValue(Task, 'Task.description'))"
                    ]
                  },
                  {
                    "name": "taskId",
                    "condition": "true",
                    "actions": [
                      "data.put('taskId', fhirPath.extractValue(Task, 'Task.id'))"
                    ]
                  },
                  {
                    "name": "taskFor",
                    "condition": "true",
                    "actions": [
                      "data.put('taskFor', fhirPath.extractValue(Task, 'Task.for.reference'))"
                    ]
                  },
                  {
                    "name": "taskQuestionnaireId",
                    "condition": "true",
                    "actions": [
                      "data.put('taskQuestionnaireId', fhirPath.extractValue(Task, 'Task.reasonReference.reference'))"
                    ]
                  }
                ],
                "views": [
                  {
                    "viewType": "BUTTON",
                    "smallSized": "true",
                    "text": "@{taskDescription}",
                    "status": "@{taskStatusColorCode}",
                    "visible": "true",
                    "actions": [
                      {
                        "trigger": "ON_CLICK",
                        "workflow": "LAUNCH_QUESTIONNAIRE",
                        "questionnaire": {
                          "id": "@{taskQuestionnaireId}",
                          "title": "@{taskDescription}",
                          "saveButtonText": "Save",
                          "taskId": "@{taskId}",
                          "resourceIdentifier": "@{taskFor}"
                        }
                      }
                    ]
                  }
                ]
              }
            }
          ]
        },
        {
          "viewType": "SPACER",
          "height": 8
        },
        {
          "viewType": "CARD",
          "padding": 16,
          "header": {
            "viewType": "COMPOUND_TEXT",
            "primaryText": "PATIENTS",
            "primaryTextColor": "#6F7274",
            "fontSize": 18.0,
            "padding": 16
          },
          "content": [
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "HHs",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                },
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "VIEW ALL",
                  "primaryTextColor": "#005084",
                  "actions": [
                    {
                      "trigger": "ON_CLICK",
                      "workflow": "LAUNCH_REGISTER",
                      "id": "householdRegister"
                    },
                    {
                      "trigger": "ON_COUNT",
                      "id": "householdRegister"
                    }
                  ]
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "CHILD",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "SICK CHILD",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "ANC",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                },
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "ANC",
                  "primaryTextColor": "#000000"
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "PNC",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "FP",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "Mental Heath",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "HIV",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "TB",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            },
            {
              "viewType": "SPACER",
              "height": 8
            },
            {
              "viewType": "ROW",
              "children": [
                {
                  "viewType": "COMPOUND_TEXT",
                  "primaryText": "CM-NTD",
                  "primaryTextColor": "#000000"
                },
                {
                  "viewType": "SPACER",
                  "width": 10
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "overFlowMenuItems": [
  ]
}
