{
  "resourceType": "Questionnaire",
  "id": "art-client-womens-health-screening-female-25-years-plus",
  "language": "en",
  "extension": [
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-targetStructureMap",
      "valueCanonical": "https://fhir-dev.d-tree.org/StructureMap/art-client-womens-health-screening-female-25-years-plus"
    }
  ],
  "title": "Women's Health Screening",
  "status": "active",
  "subjectType": [
    "Patient"
  ],
  "publisher": "mcore",
  "contact": [
    {
      "name": "http://www.d-tree.org"
    }
  ],
  "useContext": [
    {
      "code": {
        "system": "http://hl7.org/fhir/codesystem-usage-context-type.html",
        "code": "focus"
      },
      "valueCodeableConcept": {
        "coding": [
          {
            "system": "http://fhir.ona.io",
            "code": "000002",
            "display": "Malawi Core Patient"
          }
        ]
      }
    }
  ],
  "item": [
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page 1"
              }
            ],
            "text": "Page 1"
          }
        }
      ],
      "linkId": "page-1",
      "type": "group",
      "item": [
        {
          "linkId": "intro",
          "text": "You are starting Women's Health Screen where Cervical Cancer and Famiy Planning is discussed and information is provided",
          "type": "display",
          "required":false
        },
        {
          "linkId": "fp-heading",
          "text": "<h4>Family Planning</h4>",
          "type": "display",
          "required":false
        },
        {
          "linkId": "fp-check-required",
          "type": "group",
          "enableWhen": [
            {
              "question": "is-older-than-15-years",
              "operator": "=",
              "answerBoolean": true
            }
          ],
          "enableBehavior": "all",
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "drop-down",
                        "display": "Drop down"
                      }
                    ],
                    "text": "Drop down"
                  }
                }
              ],
              "linkId": "fp-check",
              "text": "* <b>ASK:</b> Are you pregnant or interested in becoming pregnant?",
              "type": "choice",
              "required": true,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "pregnant",
                    "display": "Pregnant"
                  }
                },
                {
                  "valueCoding": {
                    "code": "interested",
                    "display": "Interested in becoming pregnant"
                  }
                },
                {
                  "valueCoding": {
                    "code": "not-pregnant-or-interested",
                    "display": "Not pregnant or interested in becoming pregnant"
                  }
                }
              ]
            },
            {
              "linkId": "fp-is-pregnant",
              "type": "group",
              "enableWhen": [
                {
                  "question": "fp-check",
                  "operator": "=",
                  "answerCoding": {
                    "code": "pregnant"
                  }
                }
              ],
              "enableBehavior": "all",
              "item": [
                {
                  "linkId": "fp-is-pregnant-prompt",
                  "text": "<b>Discuss:</b> Safe conception is important for all PLHIV and making sure your VL is undetectable is the safest way for you and baby to have a safe pregnancy and decrease the chances of baby becoming infected with HIV.<br><b>Review</b>: Last viral load result and counsel accordingly",
                  "type": "display",
                  "required": false
                },
                {
                  "linkId": "fp-is-pregnant-tell",
                  "text": "<b>Tell the client:</b> You will not receive cervical cancer screening today",
                  "type": "display",
                  "required": false
                },
                {
                  "linkId": "fp-is-pregnant-write",
                  "text": "<b>Write:</b> Pregnancy status information in health passport",
                  "type": "display",
                  "required": false
                }
              ]
            },
            {
              "linkId": "fp-is-interested",
              "text": "<b>Discuss</b>: Safe conception is important for all PLHIV and making sure your VL is undetectable is the safest way for you and baby to have a safe pregnancy and decrease the chances of baby becoming infected with HIV.<br><b>Review:</b> Last viral load result and counsel accordingly",
              "type": "display",
              "enableWhen": [
                {
                  "question": "fp-check",
                  "operator": "=",
                  "answerCoding": {
                    "code": "interested"
                  }
                }
              ],
              "enableBehavior": "all",
              "required": false
            },
            {
              "linkId": "fp-is-not-pregnant-or-interested",
              "type": "group",
              "enableWhen": [
                {
                  "question": "fp-check",
                  "operator": "=",
                  "answerCoding": {
                    "code": "not-pregnant-or-interested"
                  }
                }
              ],
              "enableBehavior": "all",
              "item": [
                {
                  "linkId": "fp-is-not-pregnant-or-interested-prompt",
                  "text": "<b>Discuss:</b> Family planning methods to use with condoms are available at this clinic. I can escort you to a nurse who can tell you more about them so you can chose what is right for you.",
                  "type": "display",
                  "required": false
                },
                {
                  "linkId": "fp-is-not-pregnant-or-interested-ask",
                  "text": "<b>Ask:</b> Is client interested in accessing Family Planning methods?",
                  "type": "boolean",
                  "required": false
                },
                {
                  "linkId": "fp-is-not-pregnant-or-interested-action",
                  "text": "<b>Action:</b> Refer the client to a nurse or other family planning provider",
                  "type": "display",
                  "enableWhen": [
                    {
                      "question": "fp-is-not-pregnant-or-interested-ask",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all",
                  "required": false
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page 2"
              }
            ],
            "text": "Page 2"
          }
        }
      ],
      "linkId": "page-2",
      "text": "<h4>Cervical Cancer Screening</h4>",
      "type": "group",
      "item": [
        {
          "linkId": "cervical-cancer-screening-not-required-25-plus",
          "text": "This page is for cervical cancer screening for non-pregnant female clients who are above the age of 25.",
          "type": "display",
          "enableWhen": [
            {
              "question": "fp-check",
              "operator": "=",
              "answerCoding": {
                "code": "pregnant"
              }
            },
            {
              "question": "is-older-than-25-years",
              "operator": "=",
              "answerBoolean": false
            }
          ],
          "enableBehavior": "any",
          "required": false
        },
        {
          "linkId": "cervical-cancer-screening-required-25-plus",
          "type": "group",
          "enableWhen": [
            {
              "question": "fp-check",
              "operator": "!=",
              "answerCoding": {
                "code": "pregnant"
              }
            },
            {
              "question": "is-older-than-25-years",
              "operator": "=",
              "answerBoolean": true
            }
          ],
          "enableBehavior": "all",
          "item": [
            {
              "linkId": "ccs-25-plus-info",
              "text": "Cervical cancer is a viral infection caused by a virus  called HPV and is a preventable cancer. Having screening for cervical cancer yearly and getting treatment for pre-cancerous signs of cervical cancer are important things you can do to prevent cervical cancer.",
              "type": "display",
              "required":false
            },
            {
              "linkId": "ccs-25-plus-ask",
              "text": "* <b>Ask and check in Health passport:</b> Has the client been screened for cervical cancer before?",
              "type": "boolean",
              "required": true
            },
            {
              "linkId": "ccs-25-plus-ask-no",
              "text": "<b>Action:</b> Refer client for cervical cancer screening",
              "type": "display",
              "required":false,
              "enableWhen": [
                {
                  "question": "ccs-25-plus-ask",
                  "operator": "=",
                  "answerBoolean": false
                }
              ],
              "enableBehavior": "all"
            },
            {
              "linkId": "confirm-referral-ask-no",
              "text": "* Did you refer the client for cervical cancer screening?",
              "type": "boolean",
              "enableWhen": [
                {
                  "question": "ccs-25-plus-ask",
                  "operator": "=",
                  "answerBoolean": false
                }
              ],
              "enableBehavior": "all",
              "required": true
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "drop-down",
                        "display": "Drop down"
                      }
                    ],
                    "text": "Drop down"
                  }
                }
              ],
              "linkId": "ccs-25-plus-type",
              "text": "<b>Select</b> cervical cancer screening type",
              "type": "choice",
              "enableWhen": [
                {
                  "question": "ccs-25-plus-ask",
                  "operator": "=",
                  "answerBoolean": true
                }
              ],
              "enableBehavior": "all",
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "via",
                    "display": "VIA"
                  }
                },
                {
                  "valueCoding": {
                    "code": "hpv",
                    "display": "HPV"
                  }
                }
              ]
            },
            {
              "linkId": "via-selected",
              "type": "group",
              "enableWhen": [
                {
                  "question": "ccs-25-plus-type",
                  "operator": "=",
                  "answerCoding": {
                    "code": "via"
                  }
                }
              ],
              "enableBehavior": "all",
              "item": [
                {
                  "linkId": "date-of-last-via-screen",
                  "text": "* Enter Date of last VIA screen",
                  "type": "date",
                  "enableWhen": [
                    {
                      "question": "ccs-25-plus-type",
                      "operator": "=",
                      "answerCoding": {
                        "code": "via"
                      }
                    },
                    {
                      "question": "ccs-25-plus-ask",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all",
                  "required": true
                },
                {
                  "linkId": "refer-for-ccs-via",
                  "text": "<b>Action:</b> Refer client for cervical cancer screening",
                  "type": "display",
                  "required":false,
                  "enableWhen": [
                    {
                      "question": "date-of-last-via-screen",
                      "operator": "exists",
                      "answerBoolean": true
                    },
                    {
                      "question": "last-via-date-entered-is-older-than-a-year-ago",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all"
                },
                {
                  "linkId": "tell-no-need-for-ccs",
                  "text": "<b>Tell the client</b> You do not have a cervical cancer screening due today",
                  "type": "display",
                  "required":false,
                  "enableWhen": [
                    {
                      "question": "date-of-last-via-screen",
                      "operator": "exists",
                      "answerBoolean": true
                    },
                    {
                      "question": "last-via-date-entered-is-older-than-a-year-ago",
                      "operator": "=",
                      "answerBoolean": false
                    }
                  ],
                  "enableBehavior": "all"
                },
                {
                  "linkId": "confirm-referral-via",
                  "text": "* Did you refer the client for cervical cancer screening?",
                  "type": "boolean",
                  "enableWhen": [
                    {
                      "question": "date-of-last-via-screen",
                      "operator": "exists",
                      "answerBoolean": true
                    },
                    {
                      "question": "last-via-date-entered-is-older-than-a-year-ago",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all",
                  "required": true
                }
              ]
            },
            {
              "linkId": "hpv-selected",
              "type": "group",
              "enableWhen": [
                {
                  "question": "ccs-25-plus-type",
                  "operator": "=",
                  "answerCoding": {
                    "code": "hpv"
                  }
                }
              ],
              "enableBehavior": "all",
              "item": [
                {
                  "linkId": "date-of-last-hpv-screen",
                  "text": "* Enter Date of last HPV screen",
                  "type": "date",
                  "enableWhen": [
                    {
                      "question": "ccs-25-plus-type",
                      "operator": "=",
                      "answerCoding": {
                        "code": "hpv"
                      }
                    },
                    {
                      "question": "ccs-25-plus-ask",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all",
                  "required": true
                },
                {
                  "linkId": "refer-for-ccs-hpv",
                  "text": "<b>Action:</b> Refer client for cervical cancer screening",
                  "type": "display",
                  "required":false,
                  "enableWhen": [
                    {
                      "question": "date-of-last-hpv-screen",
                      "operator": "exists",
                      "answerBoolean": true
                    },
                    {
                      "question": "last-hpv-date-entered-is-older-than-3-years-ago",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all"
                },
                {
                  "linkId": "confirm-referral-hpv",
                  "text": "* Did you refer the client for cervical cancer screening?",
                  "type": "boolean",
                  "enableWhen": [
                    {
                      "question": "date-of-last-hpv-screen",
                      "operator": "exists",
                      "answerBoolean": true
                    },
                    {
                      "question": "last-hpv-date-entered-is-older-than-3-years-ago",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all",
                  "required": true
                },
                {
                  "linkId": "check-last-hpv-result",
                  "text": "<b>CHECK:</b> Result of last HPV screen",
                  "type": "choice",
                  "enableWhen": [
                    {
                      "question": "date-of-last-hpv-screen",
                      "operator": "exists",
                      "answerBoolean": true
                    },
                    {
                      "question": "last-hpv-date-entered-is-older-than-3-years-ago",
                      "operator": "=",
                      "answerBoolean": false
                    }
                  ],
                  "enableBehavior": "all",
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "positive",
                        "display": "Positive"
                      }
                    },
                    {
                      "valueCoding": {
                        "code": "negative",
                        "display": "Negative"
                      }
                    }
                  ]
                },
                {
                  "linkId": "check-last-hpv-result-positive",
                  "text": "<b>Action</b><br><b>Refer</b> the client to see CECAP nurse to determine next steps",
                  "type": "display",
                  "required":false,
                  "enableWhen": [
                    {
                      "question": "check-last-hpv-result",
                      "operator": "=",
                      "answerBoolean": true
                    }
                  ],
                  "enableBehavior": "all"
                },
                {
                  "linkId": "check-last-hpv-result-negative",
                  "text": "<b>Tell the client</b> You do not have a cervical cancer screening due today",
                  "type": "display",
                  "required":false,
                  "enableWhen": [
                    {
                      "question": "check-last-hpv-result",
                      "operator": "=",
                      "answerBoolean": false
                    }
                  ],
                  "enableBehavior": "all"
                }
              ]
            },
            {
              "linkId": "confirm-via-referral-negative",
              "text": "* Why did you not refer the client for cervical cancer screening?",
              "type": "choice",
              "enableWhen": [
                {
                  "question": "confirm-referral-via",
                  "operator": "=",
                  "answerBoolean": false
                },
                {
                  "question": "confirm-referral-hpv",
                  "operator": "=",
                  "answerBoolean": false
                },
                {
                  "question": "confirm-referral-ask-no",
                  "operator": "=",
                  "answerBoolean": false
                }
              ],
              "enableBehavior": "any",
              "required": true,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "no-one-available",
                    "display": "No one available to conduct the screening"
                  }
                },
                {
                  "valueCoding": {
                    "code": "not-interested",
                    "display": "No one available to conduct the screening"
                  }
                },
                {
                  "valueCoding": {
                    "code": "baby-less-than-2-months",
                    "display": "Has a baby less than 2 months old"
                  }
                },
                {
                  "valueCoding": {
                    "code": "other",
                    "display": "Other"
                  }
                }
              ]
            },
            {
              "linkId": "other-reason",
              "text": "* Enter other",
              "type": "string",
              "enableWhen": [
                {
                  "question": "confirm-via-referral-negative",
                  "operator": "=",
                  "answerCoding": {
                    "code": "other"
                  }
                }
              ],
              "enableBehavior": "all",
              "required": true
            }
          ]
        }
      ]
    },
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page 3"
              }
            ],
            "text": "Page 3"
          }
        }
      ],
      "linkId": "summary-page",
      "type": "group",
      "item": [
        {
          "linkId": "summary-page",
          "text": "Summary Page",
          "type": "display",
          "required": false
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "Patient.birthDate <= (today() - ((15 * 365).toString() + ' days').toQuantity())"
              }
            }
          ],
          "linkId": "is-older-than-15-years",
          "type": "boolean",
          "required": true
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "Patient.birthDate <= (today() - ((25 * 365).toString() + ' days').toQuantity())"
              }
            }
          ],
          "linkId": "is-older-than-25-years",
          "type": "boolean",
          "required": true
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "%resource.repeat(item).where(linkId='date-of-last-via-screen' and answer.empty().not()).answer.value < (today() - ('365 days').toQuantity())"
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
              "valueBoolean": true
            }
          ],
          "linkId": "last-via-date-entered-is-older-than-a-year-ago",
          "type": "boolean",
          "required": true
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "%resource.repeat(item).where(linkId='date-of-last-hpv-screen' and answer.empty().not()).answer.value < (today() - ((3 * 365).toString() + ' days').toQuantity())"
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
              "valueBoolean": true
            }
          ],
          "linkId": "last-hpv-date-entered-is-older-than-3-years-ago",
          "type": "boolean",
          "required": true
        }
      ]
    },
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
          "valueExpression": {
            "language": "text/fhirpath",
            "expression": "Patient.id"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
          "valueBoolean": true
        }
      ],
      "linkId": "patient-id",
      "type": "text"
    }
  ]
}